{% extends "base.html" %}
{% set meta_description = "Kirk Fuson—visual artist & storyteller behind Echo Line. Cyberpunk grit with a human heart;
inspired by Gibson, Stephenson, Bradbury, London, and films like Blade Runner, Three Days of the Condor, and Heat." %}

{% block content %}
<section class="mx-auto max-w-3xl px-4 sm:px-6 py-6">
    <!-- =========================
       CRT / Terminal Chrome
       ========================= -->
    <style>
        /* --- CRT surface + type --- */
        .crt {
            background: radial-gradient(1200px 600px at 50% -10%, rgba(0, 255, 200, .06), transparent 60%),
                linear-gradient(#0b1420, #0a121c);
            border: 1px solid #0f2230;
            border-radius: 14px;
            box-shadow: inset 0 0 0 1px rgba(0, 255, 255, .05), 0 20px 60px rgba(0, 0, 0, .45);
            color: #d1ffe9;
            position: relative;
        }

        .crt::after {
            /* glass / scan */
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background:
                repeating-linear-gradient(0deg, rgba(255, 255, 255, .04) 0 1px, transparent 1px 3px);
            mix-blend-mode: overlay;
            opacity: .45;
            border-radius: 14px;
        }

        .term {
            font: 15px/1.8 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
            padding: 18px 18px 22px;
        }

        .titlebar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px dashed rgba(0, 255, 200, .18);
            padding: 10px 14px 12px 14px;
            color: #7df2d1;
            letter-spacing: .06em;
            text-transform: uppercase;
            font-size: 12px;
        }

        .dots {
            display: inline-flex;
            gap: 6px;
            opacity: .6
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: #2ee6b8;
            box-shadow: 0 0 8px #2ee6b866
        }

        .egg-link {
            color: #7df2d1;
            opacity: .28;
            text-decoration: none;
            border-bottom: 1px dotted transparent;
        }

        .egg-link:hover {
            opacity: .9;
            border-bottom-color: #7df2d1
        }

        .grid-2 {
            display: grid;
            gap: 16px;
        }

        @media (min-width: 880px) {
            .grid-2 {
                grid-template-columns: 1.4fr .6fr;
            }
        }

        .pane {
            padding: 16px;
            border: 1px dashed rgba(0, 255, 200, .15);
            border-radius: 10px;
            background: rgba(0, 0, 0, .15);
        }

        .prompt {
            color: #7df2d1
        }

        .muted {
            color: #69c7ae
        }

        .cursor {
            display: inline-block;
            width: .55em;
            background: #7df2d1;
            height: 1em;
            vertical-align: -.15em;
            animation: blink 1.1s steps(1, end) infinite
        }

        @keyframes blink {

            0%,
            49% {
                opacity: 1
            }

            50%,
            100% {
                opacity: .1
            }
        }

        /* links styled like terminal output */
        .lnk {
            color: #7df2d1;
            text-decoration: none;
            border-bottom: 1px dotted rgba(125, 242, 209, .45);
        }

        .lnk:hover {
            color: #aaffee;
            border-bottom-color: #aaffee
        }

        /* section labels */
        .lbl {
            color: #8deed4;
            text-transform: uppercase;
            letter-spacing: .08em;
            font-size: 11px;
            opacity: .8
        }

        /* tiny status column */
        .status {
            font-size: 14px;
            color: #a8ffe7;
        }

        .status .kv {
            margin: .35rem 0
        }

        .status .k {
            color: #69c7ae
        }

        .hr-v {
            border-left: 1px dashed rgba(0, 255, 200, .18);
            width: 0;
            margin: 0 6px;
        }

        /* ---------------- Portrait Modal (hidden) ---------------- */
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            place-items: center;
            background: rgba(0, 0, 0, .85);
            z-index: 50
        }

        .modal.open {
            display: grid
        }

        .card {
            background: #061018;
            border: 1px solid #0f2230;
            border-radius: 12px;
            padding: 10px 10px 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, .6), inset 0 0 0 1px rgba(0, 255, 200, .05);
            max-width: min(92vw, 440px);
        }

        .card .bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #7df2d1;
            font-size: 12px;
            letter-spacing: .06em;
            text-transform: uppercase;
            padding: 6px 6px 8px
        }

        .crt-pic {
            width: 100%;
            aspect-ratio: 4/5;
            object-fit: cover;
            border-radius: 10px;
            display: block;
            image-rendering: pixelated;
            filter:
                sepia(60%) hue-rotate(70deg) saturate(210%) contrast(135%) brightness(85%);
            box-shadow: inset 0 0 0 1px rgba(0, 255, 200, .15);
        }

        .closeBtn {
            color: #7df2d1;
            background: transparent;
            border: 1px dashed rgba(0, 255, 200, .35);
            padding: 4px 8px;
            border-radius: 999px;
            cursor: pointer;
        }
    </style>

    <div class="crt">
        <div class="titlebar">
            <div>ECHO LINE // ABOUT.TERM</div>
            <!-- Hidden-ish egg link that opens portrait modal -->
            <a href="#" class="egg-link" id="eggWhoami" aria-label="whoami">(whoami)</a>
        </div>

        <div class="term grid-2">
            <!-- ======= Left: command stream ======= -->
            <div class="pane" id="terminal">
                <div class="line"><span class="muted">boot</span> ~ $ echo "<span class="prompt">Direct link
                        established.</span>"</div>
                <div class="line"><span class="cursor"></span></div>

                <br />

                <div class="line"><span class="muted">boot</span> ~ $ cat influences.txt</div>
                <div class="line">→ William Gibson, Neal Stephenson, Ray Bradbury, Jack London</div>
                <div class="line">→ Film stack: <em>Blade Runner</em>, <em>Three Days of the Condor</em>, <em>Heat</em>
                </div>

                <br />

                <div class="line"><span class="muted">boot</span> ~ $ open early-works</div>
                <div class="line">
                    → <a class="lnk" href="https://kirkfuson.myportfolio.com/geisha-20-book-cover-art" target="_blank"
                        rel="noopener">
                        Geisha 2.0 — Book Cover Art (early works)
                    </a>
                </div>

                <br />

                <div class="line"><span class="muted">boot</span> ~ $ follow @</div>
                <div class="line">
                    → <a class="lnk" href="https://www.instagram.com/fumankirk" target="_blank"
                        rel="noopener">@FuManKirk</a>
                    <span class="muted"># art feed</span>
                </div>

                <br />

                <div class="line"><span class="muted">boot</span> ~ $ what-to-expect</div>
                <div class="line">→ Chapters released in sequence with <span class="muted">notes</span>, <span
                        class="muted">lore</span>, and <span class="muted">sketches</span>.</div>
                <div class="line">→ Standalone extras: secret pages, terminals, ephemera—folded into the world.</div>
                <div class="line">→ Iterative updates as the city reveals new angles.</div>

                <br />

                <div class="line"><span class="muted">boot</span> ~ $ author --bio</div>
                <div class="line">→ Kirk Fuson — visual artist & storyteller building <em>Echo Line</em>: cyberpunk grit
                    with a human heart.</div>
                <div class="line">→ Direct-to-reader release; craft logs and ambient experiments included.</div>

                <br />

                <div class="line"><span class="muted">boot</span> ~ $ help</div>
                <div class="line">→ Try <a class="lnk" href="/chapters">/chapters</a> or <a class="lnk"
                        href="/">/home</a>. Toggle neon with the topbar control.</div>
            </div>

            <!-- ======= Right: tiny status column ======= -->
            <div class="pane status">
                <div class="lbl">signal</div>
                <div class="kv"><span class="k">artist.online</span> = <span class="v">true</span></div>
                <div class="kv"><span class="k">uptime</span> = <span id="uptime" class="v">—</span></div>
                <div class="kv"><span class="k">build</span> = <span class="v">about.term</span></div>

                <div class="hr-v" style="height:18px; margin:10px 0;"></div>

                <div class="lbl">shortcuts</div>
                <div class="kv">/ opens search • g cycles theme</div>
                <div class="kv"><span class="k">tip</span> = click <span class="lnk" id="whoamiInline"
                        href="#">whoami</span></div>
            </div>
        </div>
    </div>

    <footer class="text-center text-sm text-neutral-500 mt-3">
        © {{ (now().year if now else '') }} Kirk Fuson ·
        <a href="https://www.instagram.com/fumankirk" class="lnk" target="_blank" rel="noopener">@FuManKirk</a>
    </footer>

    <!-- Portrait Modal -->
    <div class="modal" id="whoamiModal" aria-hidden="true">
        <div class="card">
            <div class="bar">
                <span>WHOAMI // SIGNAL</span>
                <button class="closeBtn" id="closeModal">Close</button>
            </div>
            <img class="crt-pic"
                src="https://echoline-assets.us-southeast-1.linodeobjects.com/extras%2FKirk%2FKirkFuson.jpg"
                alt="Kirk Fuson — terminal portrait">
        </div>
    </div>

    <!-- Type-on + uptime + egg wiring -->
    <script>
        // simple type-in reveal
        (function () {
            const box = document.getElementById('terminal');
            if (!box) return;
            const lines = Array.from(box.querySelectorAll('.line'));
            let i = 0;
            function showNext() {
                if (i >= lines.length) return;
                lines[i].style.visibility = 'visible';
                i++;
                setTimeout(showNext, i < 4 ? 140 : 80); // quicker after first few
            }
            lines.forEach(l => l.style.visibility = 'hidden');
            showNext();
        })();

        // uptime ticker (minutes since page open)
        (function () {
            const el = document.getElementById('uptime');
            if (!el) return;
            const start = Date.now();
            function tick() {
                const mins = Math.max(0, Math.floor((Date.now() - start) / 60000));
                el.textContent = mins + "m";
            }
            tick(); setInterval(tick, 15000);
        })();

        // whoami egg (both header and inline)
        (function () {
            const modal = document.getElementById('whoamiModal');
            const openers = [document.getElementById('eggWhoami'), document.getElementById('whoamiInline')].filter(Boolean);
            const closeBtn = document.getElementById('closeModal');
            const open = (e) => { if (e) e.preventDefault(); modal.classList.add('open'); modal.setAttribute('aria-hidden', 'false'); };
            const close = () => { modal.classList.remove('open'); modal.setAttribute('aria-hidden', 'true'); };
            openers.forEach(a => a && a.addEventListener('click', open));
            closeBtn && closeBtn.addEventListener('click', close);
            modal && modal.addEventListener('click', (e) => { if (e.target === modal) close(); });
            window.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });
        })();
    </script>
</section>
{% endblock %}